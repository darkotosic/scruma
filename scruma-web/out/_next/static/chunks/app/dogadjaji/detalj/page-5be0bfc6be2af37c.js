(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[370],{5437:function(t,e,n){Promise.resolve().then(n.bind(n,4476))},4476:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return DogadjajiDetaljPage}});var a=n(7437),r=n(4033),i=n(2265),s=n(5446),c=n(1781),l=n(6454),o=n(3088),u=n(6574),d=n(5776);function DogadjajiDetaljPage(){let t=(0,r.useSearchParams)(),e=t.get("id"),[n,f]=(0,i.useState)(null),[h,p]=(0,i.useState)([]),[m,g]=(0,i.useState)(null);async function load(){if(!e)return g("Недостаје параметар id.");g(null);try{let[t,n]=await Promise.all([(0,l.ux)(e),(0,l.T6)({type:"sport"})]);f(t),p((null==n?void 0:n.items)||[])}catch(t){g((null==t?void 0:t.message)||"Грешка при учитавању догађаја.")}}(0,i.useEffect)(()=>{load()},[e]);let j=(0,i.useMemo)(()=>{if(!e||!h.length)return null;let t=[...h].sort((t,e)=>new Date(e.published_at||0).getTime()-new Date(t.published_at||0).getTime()),n=t.findIndex(t=>String(t.id)===String(e));return n>=0&&t[n+1]||null},[e,h]);return m?(0,a.jsx)(u.c,{title:"Догађај није доступан",details:m,onRetry:load}):n?(0,a.jsxs)("article",{className:"prose mx-auto max-w-4xl px-4 py-10 dark:prose-invert",children:[(0,a.jsx)(s.Z,{items:[{label:"Насловна",href:"/"},{label:"Догађаји",href:"/dogadjaji"},{label:n.title}]}),(0,a.jsx)("h1",{children:n.title}),(0,a.jsx)("div",{className:"text-sm opacity-70",children:(0,o._)(n.published_at,!0)}),(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:n.body_html||n.body||""}}),(0,a.jsx)(c.Z,{backHref:"/dogadjaji",backLabel:"Назад на све догађаје",nextHref:j?"/dogadjaji/detalj/?id=".concat(j.id):void 0,nextLabel:null==j?void 0:j.title})]}):(0,a.jsx)(d.c,{variant:"loading",title:"Учитавање догађаја",details:"Подаци се преузимају са CMS сервиса."})}},5446:function(t,e,n){"use strict";n.d(e,{Z:function(){return Breadcrumbs}});var a=n(7437),r=n(1396),i=n.n(r);function Breadcrumbs(t){let{items:e}=t;return(0,a.jsx)("nav",{className:"breadcrumbs","aria-label":"Путања странице",children:(0,a.jsx)("ol",{children:e.map((t,n)=>{let r=n===e.length-1;return(0,a.jsxs)("li",{children:[t.href&&!r?(0,a.jsx)(i(),{href:t.href,children:t.label}):(0,a.jsx)("span",{children:t.label}),r?null:(0,a.jsx)("span",{className:"breadcrumbs-sep",children:"/"})]},"".concat(t.label,"-").concat(n))})})})}},1781:function(t,e,n){"use strict";n.d(e,{Z:function(){return DetailFooterNav}});var a=n(7437),r=n(1396),i=n.n(r);function DetailFooterNav(t){let{backHref:e,backLabel:n,nextHref:r,nextLabel:s}=t;return(0,a.jsxs)("div",{className:"detail-footer-nav",children:[(0,a.jsxs)(i(),{href:e,className:"btn",children:["← ",n]}),r&&s?(0,a.jsxs)(i(),{href:r,className:"btn btnPrimary",children:["Следеће из категорије: ",s," →"]}):null]})}},6574:function(t,e,n){"use strict";n.d(e,{c:function(){return ApiErrorState}});var a=n(7437),r=n(5776);function ApiErrorState(t){let{title:e="Сервис тренутно није доступан",details:n,onRetry:i}=t;return(0,a.jsx)(r.c,{variant:"error",title:e,details:n,onRetry:i})}},5776:function(t,e,n){"use strict";n.d(e,{c:function(){return StatusState}});var a=n(7437);function StatusState(t){let{variant:e,title:n,details:r,onRetry:i}=t;return(0,a.jsxs)("div",{className:"status-state status-state-".concat(e),role:"error"===e?"alert":"status",children:[(0,a.jsx)("div",{className:"status-state-icon","aria-hidden":"true",children:"loading"===e?"⏳":"empty"===e?"\uD83D\uDCED":"⚠️"}),(0,a.jsx)("h3",{className:"status-state-title",children:n}),r?(0,a.jsx)("p",{className:"status-state-details",children:r}):null,"error"===e&&i?(0,a.jsx)("button",{type:"button",className:"status-state-retry",onClick:i,children:"Покушај поново"}):null]})}},6454:function(t,e,n){"use strict";n.d(e,{H6:function(){return fetchPage},IN:function(){return fetchSite},T6:function(){return fetchPosts},bR:function(){return getApiBaseUrl},el:function(){return fetchApiHealth},qD:function(){return fetchSiteSettings},ux:function(){return fetchPostById}});let a=("https://scruma-api.onrender.com".trim()||"https://scruma-api.onrender.com").replace(/\/+$/,""),getApiBaseUrl=()=>a;async function fetchJson(t,e){let n="".concat(a).concat(t.startsWith("/")?"":"/").concat(t),r=await fetch(n,{...e,headers:{Accept:"application/json",...(null==e?void 0:e.headers)||{}},cache:"no-store"});if(!r.ok){let t=await r.text().catch(()=>"");throw Error("API ".concat(r.status," ").concat(r.statusText,": ").concat(t||n))}return await r.json()}function fetchApiHealth(){return fetchJson("/health/")}function fetchSite(){return fetchJson("/api/v1/site/")}async function fetchSiteSettings(){let t=await fetchSite();return t.settings||{}}function fetchPage(t){return fetchJson("/api/v1/pages/".concat(t.replace(/^\/+|\/+$/g,""),"/"))}function fetchPosts(t){let e=new URLSearchParams;t.type&&e.set("type",t.type),t.limit&&e.set("limit",String(t.limit));let n=e.toString()?"?".concat(e.toString()):"";return fetchJson("/api/v1/posts/".concat(n))}function fetchPostById(t){return fetchJson("/api/v1/posts/".concat(t,"/"))}},3088:function(t,e,n){"use strict";function formatLocalDate(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return"";let n=new Date(t);if(Number.isNaN(n.getTime()))return t;let a=String(n.getDate()).padStart(2,"0"),r=String(n.getMonth()+1).padStart(2,"0"),i=n.getFullYear(),s="".concat(a,".").concat(r,".").concat(i,".");if(!e)return s;let c=String(n.getHours()).padStart(2,"0"),l=String(n.getMinutes()).padStart(2,"0");return"".concat(s," ").concat(c,":").concat(l)}n.d(e,{_:function(){return formatLocalDate}})},4033:function(t,e,n){t.exports=n(94)}},function(t){t.O(0,[176,971,472,560],function(){return t(t.s=5437)}),_N_E=t.O()}]);
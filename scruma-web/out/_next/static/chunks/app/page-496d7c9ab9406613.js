(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5399:function(e,t,n){Promise.resolve().then(n.bind(n,8341))},8341:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return HomePage}});var a=n(7437),i=n(2265),r=n(9023),s=n(4402),l=n(1749),c=n(7240);function SectionHeader(e){let{title:t,subtitle:n}=e;return(0,a.jsxs)("div",{className:"sectionHeader",children:[(0,a.jsx)("h2",{className:"sectionTitle",children:(0,c.W)(t)}),n?(0,a.jsx)("p",{className:"sectionSubtitle",children:(0,c.W)(n)}):null]})}var o=n(6454),u=n(8454);function mapPostsToCards(e){return e.map(e=>({title:e.title,subtitle:e.excerpt||e.body||"",date:(e.published_at||e.created_at||"").slice(0,10),image:e.image||void 0,href:e.link_url||"/vesti"}))}function HomePage(){let[e,t]=(0,i.useState)({title:"",subtitle:"",image:"",ctas:[]}),[n,c]=(0,i.useState)([]),[d,h]=(0,i.useState)([]),[m,p]=(0,i.useState)([]),[f,v]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{let e=!0;return(async()=>{try{let[n,a,i,r]=await Promise.all([(0,u.IN)(),(0,o.rd)("/api/v1/announcements/"),(0,o.rd)("/api/v1/posts/?type=news"),(0,o.rd)("/api/v1/posts/?type=sport")]);if(!e)return;let s=null==n?void 0:n.settings;t({title:(null==s?void 0:s.hero_title)||"Садржај није унет",subtitle:(null==s?void 0:s.hero_subtitle)||"Администратор још није унео податке за почетну страницу.",image:(null==s?void 0:s.hero_image)||"",ctas:[]}),c(mapPostsToCards((null==a?void 0:a.items)||[])),h(mapPostsToCards((null==i?void 0:i.items)||[])),p(mapPostsToCards((null==r?void 0:r.items)||[]))}catch(n){if(!e)return;t({title:"Садржај није унет",subtitle:"Администратор још није унео податке за почетну страницу.",image:"",ctas:[]})}finally{e&&v(!1)}})(),()=>{e=!1}},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{title:e.title,subtitle:e.subtitle,image:e.image,ctas:e.ctas}),(0,a.jsx)("section",{className:"pageSection",children:(0,a.jsxs)(s.Z,{children:[(0,a.jsx)(SectionHeader,{title:"Обавештења",subtitle:"Најважније информације."}),n.length?(0,a.jsx)(r.Z,{items:n}):(0,a.jsx)("p",{children:f?"Учитавање...":"Садржај још није унет."})]})}),(0,a.jsx)("section",{className:"pageSection",children:(0,a.jsxs)(s.Z,{children:[(0,a.jsx)(SectionHeader,{title:"Вести",subtitle:"Најновија дешавања."}),d.length?(0,a.jsx)(r.Z,{items:d}):(0,a.jsx)("p",{children:f?"Учитавање...":"Садржај још није унет."})]})}),(0,a.jsx)("section",{className:"pageSection",children:(0,a.jsxs)(s.Z,{children:[(0,a.jsx)(SectionHeader,{title:"Спортске вести",subtitle:"Резултати, најаве и локални спорт."}),m.length?(0,a.jsx)(r.Z,{items:m}):(0,a.jsx)("p",{children:f?"Учитавање...":"Садржај још није унет."})]})})]})}},9023:function(e,t,n){"use strict";n.d(t,{Z:function(){return CardGrid}});var a=n(7437),i=n(1396),r=n.n(i),s=n(7240);function CardGrid(e){let{items:t}=e;return(0,a.jsx)("div",{className:"grid",children:t.map(e=>{var t;let n=(0,a.jsxs)("div",{className:"card",children:[e.image?(0,a.jsx)("div",{className:"cardMedia",children:(0,a.jsx)("img",{src:e.image,alt:(0,s.W)(e.title),loading:"lazy"})}):null,(0,a.jsxs)("div",{className:"cardBody",children:[(0,a.jsxs)("div",{className:"cardTop",children:[e.tag?(0,a.jsx)("span",{className:"badge",children:(0,s.W)(e.tag)}):null,e.date?(0,a.jsx)("span",{className:"muted",children:(0,s.W)(e.date)}):null]}),(0,a.jsx)("h3",{className:"cardTitle",children:(0,s.W)(e.title)}),e.subtitle?(0,a.jsx)("p",{className:"cardSubtitle",children:(0,s.W)(e.subtitle)}):null,e.href?(0,a.jsx)("span",{className:"cardLink",children:(0,s.W)("Сазнајте више")}):null]})]});return e.href?(0,a.jsx)(r(),{className:"cardLinkWrap",href:e.href,children:n},"".concat(e.title,"-").concat(e.href)):(0,a.jsx)("div",{children:n},"".concat(e.title,"-").concat(null!==(t=e.date)&&void 0!==t?t:""))})})}},4402:function(e,t,n){"use strict";n.d(t,{Z:function(){return Container}});var a=n(7437);function Container(e){let{children:t}=e;return(0,a.jsx)("div",{className:"container",children:t})}},1749:function(e,t,n){"use strict";n.d(t,{Z:function(){return Hero}});var a=n(7437),i=n(1396),r=n.n(i),s=n(7240),l=n(4402);function Hero(e){let{title:t,subtitle:n,image:i,ctas:c}=e;return(0,a.jsxs)("section",{className:"hero","aria-label":(0,s.W)("Херо секција"),children:[(0,a.jsx)("div",{className:"heroMedia",style:{backgroundImage:"url(".concat(i,")")}}),(0,a.jsx)("div",{className:"heroOverlay"}),(0,a.jsx)(l.Z,{children:(0,a.jsxs)("div",{className:"heroContent",children:[(0,a.jsx)("h1",{className:"heroTitle",children:(0,s.W)(t)}),(0,a.jsx)("p",{className:"heroSubtitle",children:(0,s.W)(n)}),(0,a.jsx)("div",{className:"heroCtas",children:c.map(e=>(0,a.jsx)(r(),{className:"btn btnPrimary",href:e.href,children:(0,s.W)(e.title)},e.href))})]})})]})}},7240:function(e,t,n){"use strict";n.d(t,{Z:function(){return ScriptToggle},W:function(){return useScriptText}});var a=n(7437),i=n(2265);let r={а:"a",А:"A",б:"b",Б:"B",в:"v",В:"V",г:"g",Г:"G",д:"d",Д:"D",ђ:"đ",Ђ:"Đ",е:"e",Е:"E",ж:"ž",Ж:"Ž",з:"z",З:"Z",и:"i",И:"I",ј:"j",Ј:"J",к:"k",К:"K",л:"l",Л:"L",љ:"lj",Љ:"Lj",м:"m",М:"M",н:"n",Н:"N",њ:"nj",Њ:"Nj",о:"o",О:"O",п:"p",П:"P",р:"r",Р:"R",с:"s",С:"S",т:"t",Т:"T",ћ:"ć",Ћ:"Ć",у:"u",У:"U",ф:"f",Ф:"F",х:"h",Х:"H",ц:"c",Ц:"C",ч:"č",Ч:"Č",џ:"dž",Џ:"Dž",ш:"š",Ш:"Š"},toLatin=e=>e.split("").map(e=>{var t;return null!==(t=r[e])&&void 0!==t?t:e}).join(""),s="script-change",readScript=()=>{var e;return null!==(e=localStorage.getItem("script"))&&void 0!==e?e:"cyrl"},useScriptText=e=>{let[t,n]=(0,i.useState)("cyrl");return(0,i.useEffect)(()=>{let apply=()=>n("latn"===readScript()?"latn":"cyrl");return apply(),window.addEventListener(s,apply),()=>window.removeEventListener(s,apply)},[]),"latn"===t?toLatin(e):e};function ScriptToggle(e){let{className:t,id:n}=e,[r,l]=(0,i.useState)("cyrl");return(0,i.useEffect)(()=>{let e="latn"===readScript()?"latn":"cyrl";l(e),document.documentElement.setAttribute("data-script",e)},[]),(0,a.jsx)("button",{id:n,className:t,onClick:()=>{let e="cyrl"===r?"latn":"cyrl";l(e),localStorage.setItem("script",e),document.documentElement.setAttribute("data-script",e),window.dispatchEvent(new Event(s))},children:"cyrl"===r?"Латиница":"Ћирилица"})}},6454:function(e,t,n){"use strict";n.d(t,{bR:function(){return getApiBaseUrl},el:function(){return fetchApiHealth},rd:function(){return fetchJson}});var a,i=n(2601);let r=null!==(a=i.env.NEXT_PUBLIC_API_BASE_URL)&&void 0!==a?a:"https://scruma-api.onrender.com",getApiBaseUrl=()=>r,fetchApiHealth=async()=>{try{let e=new AbortController,t=setTimeout(()=>e.abort(),3e3),n=await fetch("".concat(r,"/api/health/"),{signal:e.signal});if(clearTimeout(t),!n.ok)return{ok:!1,message:"API је доступан, али враћа грешку."};return{ok:!0,message:"API је доступан."}}catch(e){return{ok:!1,message:"API није доступан."}}};async function fetchJson(e){let t=new AbortController,n=setTimeout(()=>t.abort(),3500);try{let n=await fetch("".concat(r).concat(e),{signal:t.signal,cache:"no-store"});if(!n.ok)throw Error("HTTP ".concat(n.status));return await n.json()}finally{clearTimeout(n)}}},8454:function(e,t,n){"use strict";n.d(t,{H6:function(){return fetchPage},IN:function(){return fetchSite},tm:function(){return fetchNav}});var a=n(6454);let fetchSite=()=>(0,a.rd)("/api/v1/site/"),fetchNav=()=>(0,a.rd)("/api/v1/nav/"),fetchPage=e=>(0,a.rd)("/api/v1/pages/".concat(e.replace(/^\/+|\/+$/g,""),"/"))}},function(e){e.O(0,[922,971,472,560],function(){return e(e.s=5399)}),_N_E=e.O()}]);